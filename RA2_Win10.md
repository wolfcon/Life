<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**

- [è€æ¸¸æˆé€šç”¨ ddraw.dll](#%E8%80%81%E6%B8%B8%E6%88%8F%E9%80%9A%E7%94%A8-ddrawdll)
  - [ä½¿ç”¨æ–¹å¼](#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F)
  - [å¿«æ·é”®](#%E5%BF%AB%E6%8D%B7%E9%94%AE)
  - [æ”¯æŒå¾ˆå¤šè€æ¸¸æˆ](#%E6%94%AF%E6%8C%81%E5%BE%88%E5%A4%9A%E8%80%81%E6%B8%B8%E6%88%8F)
- [Originçº¢è­¦2ï¼ˆå«å°¤é‡Œçš„å¤ä»‡ï¼‰çš„Win10è¡¥ä¸å’Œæ±‰åŒ–ï¼ˆç®€ä½“ä¸­æ–‡ç‰ˆï¼‰- Win10 é»‘å±è¡¥ä¸](#origin%E7%BA%A2%E8%AD%A62%E5%90%AB%E5%B0%A4%E9%87%8C%E7%9A%84%E5%A4%8D%E4%BB%87%E7%9A%84win10%E8%A1%A5%E4%B8%81%E5%92%8C%E6%B1%89%E5%8C%96%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E7%89%88--win10-%E9%BB%91%E5%B1%8F%E8%A1%A5%E4%B8%81)
  - [ğŸ§» ä¸‹è½½æ‰€éœ€æ–‡ä»¶å¤åˆ¶å¹¶æ›¿æ¢ *ä¸éœ€è¦å…¨éƒ¨éƒ½ä¸‹è½½, æŒ‰éœ€å³å¯*](#%F0%9F%A7%BB-%E4%B8%8B%E8%BD%BD%E6%89%80%E9%9C%80%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%B9%B6%E6%9B%BF%E6%8D%A2-%E4%B8%8D%E9%9C%80%E8%A6%81%E5%85%A8%E9%83%A8%E9%83%BD%E4%B8%8B%E8%BD%BD-%E6%8C%89%E9%9C%80%E5%8D%B3%E5%8F%AF)
  - [ğŸ”§ ä¿®æ”¹ exe å¯æ‰§è¡Œç¨‹åºçš„å…¼å®¹æ€§å±æ€§](#-%E4%BF%AE%E6%94%B9-exe-%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7%E5%B1%9E%E6%80%A7)
  - [ğŸ‰ å®Œç»“æ’’èŠ±](#-%E5%AE%8C%E7%BB%93%E6%92%92%E8%8A%B1)
  - [PSï¼šâš ï¸](#ps)
  - [åè®°: è¡¥ä¸ä¸­çš„åº”ç”¨ç¨‹åºæ˜¯åŸç‰ˆç¨‹åºï¼Œä½¿ç”¨äº†æ”¹æ¸²æŸ“çš„å·¥å…·ä¿®æ”¹äº†çº¢è­¦çš„æ¸²æŸ“æ–¹å¼ï¼Œ](#%E5%90%8E%E8%AE%B0-%E8%A1%A5%E4%B8%81%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%98%AF%E5%8E%9F%E7%89%88%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E4%BA%86%E6%94%B9%E6%B8%B2%E6%9F%93%E7%9A%84%E5%B7%A5%E5%85%B7%E4%BF%AE%E6%94%B9%E4%BA%86%E7%BA%A2%E8%AD%A6%E7%9A%84%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F)
- [Command & Conquer Graphics Patcher](#command--conquer-graphics-patcher)
  - [Which games can be patched?](#which-games-can-be-patched)
  - [How to use](#how-to-use)
  - [Background](#background)
  - [Credits](#credits)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->



[TOC]

# è€æ¸¸æˆé€šç”¨ ddraw.dll

[ä¸‹è½½åœ°å€: ddraw.dll](https://github.com/CnCNet/cnc-ddraw/releases/latest/download/cnc-ddraw.zip)
## ä½¿ç”¨æ–¹å¼
1. ä¸‹è½½ [cnc-ddraw.zip](https://github.com/CnCNet/cnc-ddraw/releases/latest/download/cnc-ddraw.zip) åˆ°æ¸¸æˆç›®å½•è§£å‹è‡³ç›®å½•.
2. å…³é—­æ‰€æœ‰æ¸¸æˆçš„å…¼å®¹æ¨¡å¼.
3. å¼€å§‹æ¸¸æˆ.

## å¿«æ·é”®

- [Alt] + [Enter] = åœ¨`å…¨å±`å’Œ`çª—å£æ¨¡å¼`åˆ‡æ¢
- [Ctrl] + [Tab] = è§£é”é¼ æ ‡æŒ‡é’ˆ
- [Right Alt] + [Right Ctrl] = è§£é”é¼ æ ‡æŒ‡é’ˆ

## æ”¯æŒå¾ˆå¤šè€æ¸¸æˆ
- Command & Conquer Gold
- Command & Conquer: Red Alert
- Command & Conquer: Tiberian Sun
- Command & Conquer: Red Alert 2
- Carmageddon
- Carmageddon 2
- Warcraft 2
- StarCraft
- Diablo
- Diablo 2
- Age of Empires
- Age of Empires II
- Theme Hospital
- Populous: The Beginning
- Outlaws
- Dungeon Keeper
- Dark Reign: The Future of War
- Star Wars: Galactic Battlegrounds
- Atomic Bomberman
- Dune 2000
- Oddworld: Abe's Oddysee
- Commandos
- Red Baron 3D
- F-16 Multirole Fighter
- F-22 Raptor
- Nox
- ...

# Originçº¢è­¦2ï¼ˆå«å°¤é‡Œçš„å¤ä»‡ï¼‰çš„Win10è¡¥ä¸å’Œæ±‰åŒ–ï¼ˆç®€ä½“ä¸­æ–‡ç‰ˆï¼‰- Win10 é»‘å±è¡¥ä¸

## ğŸ§» ä¸‹è½½æ‰€éœ€æ–‡ä»¶å¤åˆ¶å¹¶æ›¿æ¢ *ä¸éœ€è¦å…¨éƒ¨éƒ½ä¸‹è½½, æŒ‰éœ€å³å¯* 

- [æ¸¸æˆé»‘å±è¡¥ä¸(é’ˆå¯¹æ˜¾å¡æ¸²æŸ“, åŒ…å«äº† ddraw.dll)](RA2_Win10/ä»…Win10è¡¥ä¸ä¸å«æ±‰åŒ–.zip)
- [ç®€ä½“æ±‰åŒ–èµ„æºæ–‡ä»¶ - RA2](RA2_Win10/RA2æ±‰åŒ–.zip)
- [ç®€ä½“æ±‰åŒ–èµ„æºæ–‡ä»¶ - Yuri's Revenge](RA2_Win10/å°¤é‡Œçš„å¤ä»‡æ±‰åŒ–.zip)
- [DX çš„ 3D æ¸²æŸ“å…³é—­ä¸å¼€å¯çš„æ³¨å†Œè¡¨æ–‡ä»¶](RA2_Win10/é»‘å±å¤‡ç”¨.zip)

## ğŸ”§ ä¿®æ”¹ exe å¯æ‰§è¡Œç¨‹åºçš„å…¼å®¹æ€§å±æ€§

å°±æ˜¯è¿™ 5 ä¸ªè´§!

![5exe](RA2_Win10/5exe.jpg)

åˆ†åˆ«æ‰“å¼€æ²¡ä¸€ä¸ªç¨‹åºçš„å…¼å®¹æ€§è®¾ç½®, ä¿®æ”¹å¦‚ä¸‹é€‰é¡¹

- Compatibiity mode - **XP SP3**
- Reduced color mode - **16-bit**
- Disable fullscreen optiomizations
- Change high DPI settings - **Override high DPI scaling behavior, Scaling performed by: Application**

![Compatibility.png](RA2_Win10/Compatibility.png)

## ğŸ‰ å®Œç»“æ’’èŠ±

ç»ˆäº!!!ğŸ‘

- å¯ä»¥åˆ‡å±
- ä¸å¡é¡¿
- ä¸é»‘å±
- ç‚¹å‡»é€‰é¡¹ä¸å¡æ­»
- æ”¯æŒé«˜åˆ†è¾¨ç‡

## PSï¼šâš ï¸

1. è¡¥ä¸ä¸­çš„é»‘å±å¤‡ç”¨è¯·çœ‹é£Ÿç”¨è¯´æ˜ï¼Œä¸è¦éšæ„ä½¿ç”¨ã€‚

2. æµ‹è¯•ä¸­ç‹¬æ˜¾1080TIä¸ç”¨æ›¿æ¢åº”ç”¨ç¨‹åºè¿è¡Œä¹Ÿä¸å¡é¡¿ï¼Œæ ¸æ˜¾åœ¨è¿è¡Œå°¤é‡Œçš„å¤ä»‡ä¼šå¡é¡¿ 

>  æœ¬æ–‡å†…å®¹ç»è¿‡æ•´ç†, éƒ¨åˆ†å‚è€ƒåŸå§‹ä½œè€…ï¼š[é²æ±€LT](https://www.bilibili.com/read/cv357537)

## åè®°: è¡¥ä¸ä¸­çš„åº”ç”¨ç¨‹åºæ˜¯åŸç‰ˆç¨‹åºï¼Œä½¿ç”¨äº†æ”¹æ¸²æŸ“çš„å·¥å…·ä¿®æ”¹äº†çº¢è­¦çš„æ¸²æŸ“æ–¹å¼ï¼Œ

å–è‡ªå›½å¤–å¤§ç¥ åŸé“¾æ¥ï¼šhttp://www.stuffhost.de/files/cnc/CnCPatcher.html

ä¸‹é¢æ˜¯[å¤‡ä»½è¡¥ä¸](RA2_Win10/CnCGraphicsPatch.zip)ä»¥åŠå†…å®¹.

# Command & Conquer Graphics Patcher

Command & Conquer Graphics Patcher is a tool to make rendering in Tiberian Sun, Red Alert 2 and Yuri's Revenge faster.

## Which games can be patched?

This works for the latest patched versions, whether they are English or German. Tiberian Sun uses a packed exe, in which I couldn't locate the spot to change. If you have an unpacked exe (like from a NoCD-Patch), this should work, too. I didn't test any other language version.

At the time of release, this project was merely a day old, so if anything does not work, send me a message. This patch is designed to improve rendering in Windows Vista and later. It might not have an effect on earlier versions of Windows, or it might even have a negative impact. This patch is also stupid, because it does not automatically distiguish between OS versions to select the best behavior. Sorry for that, but I won't change it.

Testing showed this patch is working even with mods like Twisted Insurrection for Tiberian Sun and Mental Omega 2.0psi (which is using NPatch). So chances are good it is working for other mods, too.

## How to use

**Download** the patcher and either put in in the same directory as the game or put the game.exe/gamemd.exe file in the same folder as this patcher and run it. The patch is not applied until you apply it explicitly, and it can be undone again using the patcher.

To prevent issues with Windows Vista or later, I recommend to put the patcher into a separate folder and copy the game file into it. Copy it back after patching. Also: Back up your original game file, just to be sure.

You will need the Microsoft .net Framework 3.5 to run this tool. After all files are patched, this patcher is not needed any more.

## Background

The dimetric Command & Conquer games use several temporary graphics to draw to. Some of them are allocated in Video RAM, some of them are allocated in system RAM. When the game wants to draw something, the data has to be copied from VRAM to system RAM, which is an expensive operation and it gets more obvious the more objects (units, debris, ...) are on the map. The patch changes the game to not allocate surfaces in VRAM in the first place, so this cannot become an issue.

The following bytes need to be changed. This is not optimized. If you understand the raw assembler instructions, you can optimize it by putting a `jmp` there.

| Game           | Offset   | Original    | Patched     |
| -------------- | -------- | ----------- | ----------- |
| Tiberian Sun   | 0008AC2F | 3C 01 75 0C | 90 90 90 90 |
| Red Alert 2    | 000AA51F | 3C 01 75 0C | 90 90 90 90 |
| Yuri's Revenge | 000BA61F | 3C 01 75 0A | 90 90 90 90 |

## Credits

The patches solve the problem the same way as it is done by Ares, the Yuri's Revenge expansion dll. The original fix was implemented by DCoder. I applied this solution to TS and RA2 and coded the patching tool around it.



> CnCPatcher Â© AlexB 2012. Last updated: 2012-06-16.
